
<div class="separator" style="clear: both;"><a href="https://cdn-icons-png.flaticon.com/128/14228/14228136.png" style="display: block; padding: 1em 0px; text-align: center;"><img alt="" border="0" data-original-height="128" data-original-width="128" src="https://cdn-icons-png.flaticon.com/128/14228/14228136.png" style="display: none;" width="200" /></a></div>

<html>
<head>
<meta charset="utf-8"></meta>
<title>Advanced Image Merger</title>
<style>
body{font-family:Arial,sans-serif;max-width:900px;margin:0 auto;padding:20px;background:#f5f5f5}
.tool-container{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
h2{color:#333;border-bottom:1px solid #eee;padding-bottom:10px}
.upload-section{display:flex;flex-wrap:wrap;gap:20px;margin-bottom:20px}
.image-upload{flex:1;min-width:300px}
.preview-container{margin-top:10px;border:1px dashed #ccc;padding:10px;text-align:center;min-height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#fafafa}
.preview-container img{max-width:100%;max-height:250px;display:block;margin:0 auto}
.caption-section{margin-top:15px}
.text-options{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
.text-options select,.text-options input:not([type="color"]){padding:6px;border-radius:4px;border:1px solid #ddd}
.controls-section{display:flex;flex-wrap:wrap;gap:12px;margin:25px 0}
.btn{padding:8px 16px;background:#4285f4;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background .2s}
.btn:hover{background:#3367d6}
.btn:disabled{background:#ccc;cursor:not-allowed}
.btn-danger{background:#dc3545}
.btn-danger:hover{background:#c82333}
.options-panel{background:#f9f9f9;padding:15px;border-radius:5px;margin-bottom:20px}
.options-panel h3{margin-top:0;color:#555}
.radio-group{display:flex;gap:15px;margin:10px 0}
.radio-option{display:flex;align-items:center;gap:5px}
input[type="color"]{width:30px;height:30px;padding:0;border:1px solid #ccc;cursor:pointer}
select,input[type="text"],textarea{padding:8px;border:1px solid #ccc;border-radius:4px;width:100%;box-sizing:border-box}
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.caption-position{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:8px}
.pos-btn{padding:6px;border:1px solid #ddd;background:#fff;border-radius:3px;cursor:pointer;text-align:center;font-size:12px}
.pos-btn:hover{background:#f0f0f0}
.pos-btn.active{background:#4285f4;color:#fff;border-color:#4285f4}
#finalCanvas{max-width:100%;margin:20px auto;border:1px solid #ddd;display:block;background:#fafafa}
.download-section{text-align:center;margin-top:20px}
.style-btn{width:30px;height:30px;display:inline-flex;align-items:center;justify-content:center;border:1px solid #ddd;background:#fff;border-radius:3px;cursor:pointer}
.style-btn:hover{background:#f5f5f5}
.style-btn.active{background:#e0e0e0}
.text-bg-color-container{display:flex;align-items:center;gap:5px;margin-top:5px}
.text-bg-color-container label{font-size:12px;color:#666}
@media(max-width:768px){
.two-col{grid-template-columns:1fr}
.upload-section{flex-direction:column}
.image-upload{min-width:auto}
}
</style>
</head>
<body>
<div class="tool-container">
<h2>Advanced Image Merger with Captions</h2>
<div class="upload-section">
<div class="image-upload">
<h3>Image 1</h3>
<input accept="image/*" class="btn" id="imageUpload1" type="file" />
<div class="preview-container" id="preview1"><span>Preview will appear here</span></div>
<div class="caption-section">
<label>Caption:</label>
<textarea id="caption1" placeholder="Enter caption for image 1" rows="2"></textarea>
<div class="text-options">
<select id="font1">
<option value="Arial">Arial</option>
<option value="Verdana">Verdana</option>
<option value="Georgia">Georgia</option>
<option value="Courier New">Courier</option>
<option value="Times New Roman">Times</option>
</select>
<select id="size1">
<option value="16">Small</option>
<option selected="" value="24">Medium</option>
<option value="32">Large</option>
<option value="40">X-Large</option>
<option value="48">XX-Large</option>
</select>
<input id="color1" title="Text Color" type="color" value="#000000" />
<button class="style-btn" id="bold1" onclick="toggleStyle('bold1')" title="Bold"><b>B</b></button>
<button class="style-btn" id="italic1" onclick="toggleStyle('italic1')" title="Italic"><i>I</i></button>
<button class="style-btn" id="underline1" onclick="toggleStyle('underline1')" title="Underline"><u>U</u></button>
</div>
<div class="text-bg-color-container">
<label>Text BG:</label>
<input id="textBgColor1" title="Text Background Color" type="color" value="#ffffff00" />
</div>
<div class="caption-position">
<div class="pos-btn" data-img="1" data-pos="top-left" onclick="setCaptionPos(this)">Top Left</div>
<div class="pos-btn" data-img="1" data-pos="top-center" onclick="setCaptionPos(this)">Top Center</div>
<div class="pos-btn" data-img="1" data-pos="top-right" onclick="setCaptionPos(this)">Top Right</div>
<div class="pos-btn" data-img="1" data-pos="middle-left" onclick="setCaptionPos(this)">Middle Left</div>
<div class="pos-btn active" data-img="1" data-pos="bottom-center" onclick="setCaptionPos(this)">Bottom Center</div>
<div class="pos-btn" data-img="1" data-pos="middle-right" onclick="setCaptionPos(this)">Middle Right</div>
<div class="pos-btn" data-img="1" data-pos="bottom-left" onclick="setCaptionPos(this)">Bottom Left</div>
<div class="pos-btn" data-img="1" data-pos="bottom-right" onclick="setCaptionPos(this)">Bottom Right</div>
</div>
</div>
</div>
<div class="image-upload">
<h3>Image 2</h3>
<input accept="image/*" class="btn" id="imageUpload2" type="file" />
<div class="preview-container" id="preview2"><span>Preview will appear here</span></div>
<div class="caption-section">
<label>Caption:</label>
<textarea id="caption2" placeholder="Enter caption for image 2" rows="2"></textarea>
<div class="text-options">
<select id="font2">
<option value="Arial">Arial</option>
<option value="Verdana">Verdana</option>
<option value="Georgia">Georgia</option>
<option value="Courier New">Courier</option>
<option value="Times New Roman">Times</option>
</select>
<select id="size2">
<option value="16">Small</option>
<option selected="" value="24">Medium</option>
<option value="32">Large</option>
<option value="40">X-Large</option>
<option value="48">XX-Large</option>
</select>
<input id="color2" title="Text Color" type="color" value="#000000" />
<button class="style-btn" id="bold2" onclick="toggleStyle('bold2')" title="Bold"><b>B</b></button>
<button class="style-btn" id="italic2" onclick="toggleStyle('italic2')" title="Italic"><i>I</i></button>
<button class="style-btn" id="underline2" onclick="toggleStyle('underline2')" title="Underline"><u>U</u></button>
</div>
<div class="text-bg-color-container">
<label>Text BG:</label>
<input id="textBgColor2" title="Text Background Color" type="color" value="#ffffff00" />
</div>
<div class="caption-position">
<div class="pos-btn" data-img="2" data-pos="top-left" onclick="setCaptionPos(this)">Top Left</div>
<div class="pos-btn" data-img="2" data-pos="top-center" onclick="setCaptionPos(this)">Top Center</div>
<div class="pos-btn" data-img="2" data-pos="top-right" onclick="setCaptionPos(this)">Top Right</div>
<div class="pos-btn" data-img="2" data-pos="middle-left" onclick="setCaptionPos(this)">Middle Left</div>
<div class="pos-btn active" data-img="2" data-pos="bottom-center" onclick="setCaptionPos(this)">Bottom Center</div>
<div class="pos-btn" data-img="2" data-pos="middle-right" onclick="setCaptionPos(this)">Middle Right</div>
<div class="pos-btn" data-img="2" data-pos="bottom-left" onclick="setCaptionPos(this)">Bottom Left</div>
<div class="pos-btn" data-img="2" data-pos="bottom-right" onclick="setCaptionPos(this)">Bottom Right</div>
</div>
</div>
</div>
</div>
<div class="options-panel">
<h3>Merge Options</h3>
<div class="two-col">
<div>
<label>Layout:</label>
<div class="radio-group">
<div class="radio-option">
<input checked="" id="layoutHorizontal" name="layout" type="radio" value="horizontal" />
<label for="layoutHorizontal">Side-by-side</label>
</div>
<div class="radio-option">
<input id="layoutVertical" name="layout" type="radio" value="vertical" />
<label for="layoutVertical">Stacked</label>
</div>
</div>
<label>Spacing Between Images:</label>
<input id="spacing" max="100" min="0" style="width: 100%;" type="range" value="10" />
<span id="spacingValue">10px</span>
<div style="margin-top: 10px;">
<div class="radio-option">
<input checked="" id="equalSize" type="checkbox" />
<label for="equalSize">Make images equal size</label>
</div>
</div>
</div>
<div>
<label>Image Ratio:</label>
<select id="cropRatio">
<option value="none">Original</option>
<option value="1:1">Square (1:1)</option>
<option value="4:3">Standard (4:3)</option>
<option value="16:9">Wide (16:9)</option>
<option value="3:4">Portrait (3:4)</option>
</select>
<label>Background Color:</label>
<input id="bgColor" type="color" value="#ffffff" />
</div>
</div>
<div class="two-col">
<div>
<label>Filter:</label>
<select id="imageFilter">
<option value="none">None</option>
<option value="grayscale">Grayscale</option>
<option value="sepia">Sepia</option>
<option value="brightness">Brightness (+20%)</option>
<option value="contrast">Contrast (+50%)</option>
<option value="invert">Invert Colors</option>
</select>
</div>
<div>
<label>Image Border:</label>
<select id="imageBorder">
<option value="none">None</option>
<option value="solid">Solid</option>
<option value="dashed">Dashed</option>
<option value="shadow">Shadow Effect</option>
</select>
<input id="borderColor" style="margin-top: 5px;" type="color" value="#000000" />
</div>
</div>
</div>
<div class="controls-section">
<button class="btn" id="mergeBtn" onclick="mergeImages()">Merge Images</button>
<button class="btn" disabled="" id="downloadBtn" onclick="downloadImage()"><a href="https://essentialmost.com/AbJdyf">Download Merged Image</a></button>
<button class="btn btn-danger" id="clearBtn" onclick="clearAll()">Clear All</button>
</div>
<canvas id="finalCanvas"></canvas>
</div>
<script>
let images=[null,null],
canvas=document.getElementById("finalCanvas"),
ctx=canvas.getContext("2d"),
textStyles={bold1:false,italic1:false,underline1:false,bold2:false,italic2:false,underline2:false},
captionPositions={1:"bottom-center",2:"bottom-center"};

document.getElementById("imageUpload1").addEventListener("change",function(e){loadImage(e,0)});
document.getElementById("imageUpload2").addEventListener("change",function(e){loadImage(e,1)});
document.getElementById("spacing").addEventListener("input",function(){document.getElementById("spacingValue").textContent=this.value+"px"});

function loadImage(e,index){
const file=e.target.files[0];
if(!file)return;
const reader=new FileReader(),
preview=document.getElementById(`preview${index+1}`);
preview.innerHTML='<span>Loading...</span>';
reader.onload=function(event){
const img=new Image();
img.onload=function(){
images[index]=img;
preview.innerHTML="";
const previewImg=document.createElement("img");
previewImg.src=event.target.result;
preview.appendChild(previewImg)
};
img.src=event.target.result
};
reader.readAsDataURL(file)
}

function toggleStyle(styleId){
textStyles[styleId]=!textStyles[styleId];
document.getElementById(styleId).classList.toggle("active")
}

function setCaptionPos(btn){
const imgNum=btn.getAttribute("data-img"),
pos=btn.getAttribute("data-pos");
captionPositions[imgNum]=pos;
document.querySelectorAll(`.caption-position [data-img="${imgNum}"]`).forEach(b=>b.classList.remove("active"));
btn.classList.add("active")
}

function mergeImages(){
if(!images[0]||!images[1])return alert("Please upload both images first");
const layout=document.querySelector("input[name='layout']:checked").value,
ratio=document.getElementById("cropRatio").value,
bgColor=document.getElementById("bgColor").value,
filter=document.getElementById("imageFilter").value,
borderStyle=document.getElementById("imageBorder").value,
borderColor=document.getElementById("borderColor").value,
spacing=parseInt(document.getElementById("spacing").value),
equalSize=document.getElementById("equalSize").checked;

let img1=applyCrop(images[0],ratio),
img2=applyCrop(images[1],ratio),
width,height;

if(equalSize){
// Make both images the same size (use the larger dimensions)
const maxWidth=Math.max(img1.width,img2.width),
maxHeight=Math.max(img1.height,img2.height);

// Resize both images to match the larger dimensions
img1=resizeImage(img1,maxWidth,maxHeight);
img2=resizeImage(img2,maxWidth,maxHeight);
}

if(layout==="horizontal"){
width=img1.width+img2.width+spacing;
height=Math.max(img1.height,img2.height)
}else{
width=Math.max(img1.width,img2.width);
height=img1.height+img2.height+spacing
}

canvas.width=width;
canvas.height=height;
ctx.fillStyle=bgColor;
ctx.fillRect(0,0,width,height);

if(layout==="horizontal"){
drawImageWithBorder(img1,filter,borderStyle,borderColor,0,0);
drawImageWithBorder(img2,filter,borderStyle,borderColor,img1.width+spacing,0);
drawCaption(1,img1.width,img1.height,0,0);
drawCaption(2,img2.width,img2.height,img1.width+spacing,0)
}else{
drawImageWithBorder(img1,filter,borderStyle,borderColor,0,0);
drawImageWithBorder(img2,filter,borderStyle,borderColor,0,img1.height+spacing);
drawCaption(1,img1.width,img1.height,0,0);
drawCaption(2,img2.width,img2.height,0,img1.height+spacing)
}

document.getElementById("downloadBtn").disabled=false
}

function resizeImage(img, width, height) {
    const canvas = document.createElement('canvas');
    canvas.width = width;
    canvas.height = height;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(img, 0, 0, width, height);
    const newImg = new Image();
    newImg.src = canvas.toDataURL();
    return newImg;
}

function drawImageWithBorder(img,filter,borderStyle,borderColor,x,y){
const tempCanvas=document.createElement("canvas"),
tempCtx=tempCanvas.getContext("2d");
tempCanvas.width=img.width;
tempCanvas.height=img.height;
tempCtx.drawImage(img,0,0);
if(filter!=="none"){
applyFilter(tempCtx,tempCanvas,filter)
}
if(borderStyle!=="none"){
tempCtx.strokeStyle=borderColor;
tempCtx.lineWidth=2;
if(borderStyle==="dashed"){
tempCtx.setLineDash([5,5])
}else if(borderStyle==="shadow"){
tempCtx.shadowColor="rgba(0,0,0,0.5)";
tempCtx.shadowBlur=10;
tempCtx.shadowOffsetX=5;
tempCtx.shadowOffsetY=5
}
tempCtx.strokeRect(0,0,tempCanvas.width,tempCanvas.height);
if(borderStyle==="shadow"){
tempCtx.shadowColor="transparent"
}
}
ctx.drawImage(tempCanvas,x,y)
}

function applyCrop(img,ratio){
if(ratio==="none")return img;
const ratios={"1:1":1,"4:3":4/3,"16:9":16/9,"3:4":3/4},
targetRatio=ratios[ratio],
canvas=document.createElement("canvas"),
ctx=canvas.getContext("2d"),
imgRatio=img.width/img.height;
let sx=0,sy=0,sw=img.width,sh=img.height;
if((ratio==="3:4"&&imgRatio>targetRatio)||(ratio!=="3:4"&&imgRatio>targetRatio)){
sw=img.height*targetRatio;
sx=(img.width-sw)/2
}else if((ratio==="3:4"&&imgRatio<targetRatio)||(ratio!=="3:4"&&imgRatio<targetRatio)){
sh=img.width/targetRatio;
sy=(img.height-sh)/2
}
canvas.width=ratio==="3:4"?img.height*targetRatio:img.width;
canvas.height=ratio==="3:4"?img.height:img.width/targetRatio;
ctx.drawImage(img,sx,sy,sw,sh,0,0,canvas.width,canvas.height);
const newImg=new Image();
newImg.src=canvas.toDataURL();
return newImg
}

function applyFilter(ctx,canvas,filter){
const imageData=ctx.getImageData(0,0,canvas.width,canvas.height),
data=imageData.data;
if(filter==="grayscale"){
for(let i=0;i<data.length;i+=4){
const avg=(data[i]+data[i+1]+data[i+2])/3;
data[i]=avg;
data[i+1]=avg;
data[i+2]=avg
}
}else if(filter==="sepia"){
for(let i=0;i<data.length;i+=4){
const r=data[i],g=data[i+1],b=data[i+2];
data[i]=Math.min(255,(r*.393)+(g*.769)+(b*.189));
data[i+1]=Math.min(255,(r*.349)+(g*.686)+(b*.168));
data[i+2]=Math.min(255,(r*.272)+(g*.534)+(b*.131))
}
}else if(filter==="brightness"){
for(let i=0;i<data.length;i+=4){
data[i]=Math.min(255,data[i]*1.2);
data[i+1]=Math.min(255,data[i+1]*1.2);
data[i+2]=Math.min(255,data[i+2]*1.2)
}
}else if(filter==="contrast"){
for(let i=0;i<data.length;i+=4){
data[i]=Math.min(255,128+(data[i]-128)*1.5);
data[i+1]=Math.min(255,128+(data[i+1]-128)*1.5);
data[i+2]=Math.min(255,128+(data[i+2]-128)*1.5)
}
}else if(filter==="invert"){
for(let i=0;i<data.length;i+=4){
data[i]=255-data[i];
data[i+1]=255-data[i+1];
data[i+2]=255-data[i+2]
}
}
ctx.putImageData(imageData,0,0)
}

function drawCaption(imgNum,imgWidth,imgHeight,offsetX,offsetY){
const caption=document.getElementById(`caption${imgNum}`).value;
if(!caption)return;
const font=document.getElementById(`font${imgNum}`).value,
size=parseInt(document.getElementById(`size${imgNum}`).value),
color=document.getElementById(`color${imgNum}`).value,
textBgColor=document.getElementById(`textBgColor${imgNum}`).value,
bold=textStyles[`bold${imgNum}`],
italic=textStyles[`italic${imgNum}`],
underline=textStyles[`underline${imgNum}`],
pos=captionPositions[imgNum];
let fontStyle="";
if(bold)fontStyle+="bold ";
if(italic)fontStyle+="italic ";
fontStyle+=size+"px "+font;
ctx.font=fontStyle;
ctx.fillStyle=color;
const textMetrics=ctx.measureText(caption),
textWidth=textMetrics.width;
let x,y,textAlign,textBaseline;
switch(pos){
case"top-left":x=offsetX+10;y=offsetY+size+5;textAlign="left";textBaseline="top";break;
case"top-center":x=offsetX+imgWidth/2;y=offsetY+size+5;textAlign="center";textBaseline="top";break;
case"top-right":x=offsetX+imgWidth-10;y=offsetY+size+5;textAlign="right";textBaseline="top";break;
case"middle-left":x=offsetX+10;y=offsetY+imgHeight/2;textAlign="left";textBaseline="middle";break;
case"middle-right":x=offsetX+imgWidth-10;y=offsetY+imgHeight/2;textAlign="right";textBaseline="middle";break;
case"bottom-left":x=offsetX+10;y=offsetY+imgHeight-5;textAlign="left";textBaseline="bottom";break;
case"bottom-center":x=offsetX+imgWidth/2;y=offsetY+imgHeight-5;textAlign="center";textBaseline="bottom";break;
case"bottom-right":x=offsetX+imgWidth-10;y=offsetY+imgHeight-5;textAlign="right";textBaseline="bottom";break
}

// Draw text background if not transparent
if (textBgColor !== "#ffffff00") {
    const padding = 5;
    const bgHeight = size + padding * 2;
    let bgY = y;
    
    // Adjust background position based on text baseline
    if (textBaseline === "top") {
        bgY = y - padding;
    } else if (textBaseline === "middle") {
        bgY = y - size/2 - padding;
    } else if (textBaseline === "bottom") {
        bgY = y - size - padding;
    }
    
    ctx.fillStyle = textBgColor;
    if (textAlign === "left") {
        ctx.fillRect(x - padding, bgY, textWidth + padding * 2, bgHeight);
    } else if (textAlign === "center") {
        ctx.fillRect(x - textWidth/2 - padding, bgY, textWidth + padding * 2, bgHeight);
    } else if (textAlign === "right") {
        ctx.fillRect(x - textWidth - padding, bgY, textWidth + padding * 2, bgHeight);
    }
}

ctx.textAlign=textAlign;
ctx.textBaseline=textBaseline;
ctx.fillStyle=color;
ctx.fillText(caption,x,y);

// Draw underline if selected
if (underline) {
    const underlineY = y + 2; // Position below the text
    let underlineX1 = x;
    let underlineX2 = x;
    
    if (textAlign === "left") {
        underlineX1 = x;
        underlineX2 = x + textWidth;
    } else if (textAlign === "center") {
        underlineX1 = x - textWidth/2;
        underlineX2 = x + textWidth/2;
    } else if (textAlign === "right") {
        underlineX1 = x - textWidth;
        underlineX2 = x;
    }
    
    ctx.beginPath();
    ctx.moveTo(underlineX1, underlineY);
    ctx.lineTo(underlineX2, underlineY);
    ctx.strokeStyle = color;
    ctx.lineWidth = 1;
    ctx.stroke();
}
}

function downloadImage(){
const link=document.createElement("a");
link.download="merged-image-"+new Date().getTime()+".png";
link.href=canvas.toDataURL("image/png");
document.body.appendChild(link);
link.click();
document.body.removeChild(link)
}

function clearAll() {
    // Reset images
    images = [null, null];
    
    // Clear previews
    document.getElementById('preview1').innerHTML = '<span>Preview will appear here</span>';
    document.getElementById('preview2').innerHTML = '<span>Preview will appear here</span>';
    
    // Clear file inputs
    document.getElementById('imageUpload1').value = '';
    document.getElementById('imageUpload2').value = '';
    
    // Clear captions
    document.getElementById('caption1').value = '';
    document.getElementById('caption2').value = '';
    
    // Reset text styles
    textStyles = {bold1: false, italic1: false, underline1: false, bold2: false, italic2: false, underline2: false};
    document.querySelectorAll('.style-btn').forEach(btn => btn.classList.remove('active'));
    
    // Reset caption positions
    captionPositions = {1: "bottom-center", 2: "bottom-center"};
    document.querySelectorAll('.pos-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-pos') === 'bottom-center') {
            btn.classList.add('active');
        }
    });
    
    // Reset text background colors
    document.getElementById('textBgColor1').value = '#ffffff00';
    document.getElementById('textBgColor2').value = '#ffffff00';
    
    // Reset merge options
    document.getElementById('layoutHorizontal').checked = true;
    document.getElementById('spacing').value = 10;
    document.getElementById('spacingValue').textContent = '10px';
    document.getElementById('equalSize').checked = true;
    document.getElementById('cropRatio').value = 'none';
    document.getElementById('bgColor').value = '#ffffff';
    document.getElementById('imageFilter').value = 'none';
    document.getElementById('imageBorder').value = 'none';
    document.getElementById('borderColor').value = '#000000';
    
    // Reset fonts and sizes
    document.getElementById('font1').value = 'Arial';
    document.getElementById('font2').value = 'Arial';
    document.getElementById('size1').value = '24';
    document.getElementById('size2').value = '24';
    document.getElementById('color1').value = '#000000';
    document.getElementById('color2').value = '#000000';
    
    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    canvas.width = 0;
    canvas.height = 0;
    
    // Disable download button
    document.getElementById('downloadBtn').disabled = true;
}
</script>
</body>
</html>